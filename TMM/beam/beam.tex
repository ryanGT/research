{{\def\dash{\raise2.1pt\hbox{\rule{4pt}{0.3pt}}\hspace{1pt}}\begin{tabbing}
{\textbf{from}}\hspace{5pt}\_\_future\_\_\hspace{5pt}{\textbf{import}}\hspace{5pt}division\\
{\textbf{from}}\hspace{5pt}scipy\hspace{5pt}{\textbf{import}}\hspace{5pt}cos,\hspace{5pt}cosh,\hspace{5pt}sin,\hspace{5pt}sinh,\hspace{5pt}array,\hspace{5pt}r\_,\hspace{5pt}c\_,\hspace{5pt}exp,\hspace{5pt}pi,\hspace{5pt}m{}...\`$\Rightarrow$\\
...{}atrixmultiply,\hspace{5pt}real,\hspace{5pt}imag,\hspace{5pt}zeros,\hspace{5pt}eye\\
{\textbf{import}}\hspace{5pt}MLab\\
{\textbf{import}}\hspace{5pt}scipy\\
{\textbf{from}}\hspace{5pt}scipy.linalg\hspace{5pt}{\textbf{import}}\hspace{5pt}det\\
{\textbf{import}}\hspace{5pt}copy,\hspace{5pt}re\\
{\textbf{import}}\hspace{5pt}pdb\\
\\
{\textbf{from}}\hspace{5pt}TMM\hspace{5pt}{\textbf{import}}\hspace{5pt}TMMElement,\hspace{5pt}HT4\\
\\
{\textbf{class}}\hspace{5pt}BeamElement(TMMElement):\\
\hspace{20pt}{\textbf{def}}\hspace{5pt}\_\_init\_\_(self,params,maxsize=12,label={\texttt{{'}{'}}},usez=False,symna{}...\`$\Rightarrow$\\
...{}me={\texttt{{'}{'}}},symlabel={\texttt{{'}{'}}},symsub=False):\\
\hspace{40pt}self.usez=usez\\
\hspace{40pt}TMMElement.\_\_init\_\_(self,{\texttt{{'}beam{'}}},params,maxsize=maxsize,la{}...\`$\Rightarrow$\\
...{}bel=label,symname=symname,symlabel=symlabel,symsub=symsub)\\
\\
\hspace{20pt}{\textbf{def}}\hspace{5pt}GetMat(self,s):\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}self.maxsize==4\hspace{5pt}{\textbf{and}}\hspace{5pt}self.usez:\\
\hspace{60pt}bendmat1=bendmatz(s,self.params,{\texttt{{'}EI{'}}})\\
\hspace{40pt}{\textbf{elif}}\hspace{5pt}self.params.has\_key({\texttt{{'}EI1{'}}}):\\
\hspace{60pt}bendmat1=bendmaty(s,self.params,{\texttt{{'}EI1{'}}})\\
\hspace{40pt}{\textbf{elif}}\hspace{5pt}self.params.has\_key({\texttt{{'}EI{'}}}):\\
\hspace{60pt}bendmat1=bendmaty(s,self.params,{\texttt{{'}EI{'}}})\\
\hspace{40pt}{\textbf{else:}}\\
\hspace{60pt}{\textbf{raise}}\hspace{5pt}KeyError,\hspace{5pt}{\texttt{{'}Neither\hspace{5pt}EI\hspace{5pt}nor\hspace{5pt}EI1\hspace{5pt}found\hspace{5pt}in\hspace{5pt}params{'}}}\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}self.maxsize==4:\\
\hspace{60pt}{\textbf{return}}\hspace{5pt}bendmat1\\
\hspace{40pt}{\textbf{elif}}\hspace{5pt}self.maxsize$>$4:\\
\hspace{60pt}bendmat2=bendmatz(s,self.params,{\texttt{{'}EI2{'}}})\\
\hspace{60pt}zmat=scipy.zeros(scipy.shape(bendmat2))\\
\hspace{45pt}\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}self.maxsize==8:\\
\hspace{60pt}bigmat1=c\_{[}bendmat1,zmat{]}\\
\hspace{60pt}bigmat2=c\_{[}zmat,bendmat2{]}\\
\hspace{60pt}temp=r\_{[}bigmat1,bigmat2{]}\\
\hspace{60pt}{\textbf{return}}\hspace{5pt}Transform8by8(temp)\\
\hspace{40pt}{\textbf{elif}}\hspace{5pt}self.maxsize==12:\\
\hspace{60pt}atmat=axialtorsionmat(s,self.params)\\
\hspace{60pt}t1=c\_{[}bendmat1,zmat{]}\\
\hspace{60pt}t2=c\_{[}zmat,bendmat2{]}\\
\hspace{60pt}temp=r\_{[}t1,t2{]}\\
\hspace{60pt}temp=Transform8by8(temp)\\
\hspace{60pt}row1=c\_{[}atmat,zmat,zmat{]}\\
\hspace{60pt}part2=c\_{[}scipy.zeros((8,4)),temp{]}\\
{\it{\#\hspace{80pt}row3=c\_{[}zmat,zmat,bendmat2{]}}}\\
\hspace{60pt}{\textbf{return}}\hspace{5pt}r\_{[}row1,\hspace{5pt}part2{]}\\
\\
\hspace{20pt}{\textbf{def}}\hspace{5pt}GetHT(self):\\
\hspace{40pt}{\textbf{return}}\hspace{5pt}HT4(x=self.params{[}{\texttt{{'}L{'}}}{]})\\
\\
\hspace{20pt}{\textbf{def}}\hspace{5pt}GetMaximaString(self,name=None,label=None,N=None,aug=0):\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}label\hspace{5pt}{\textbf{is}}\hspace{5pt}None:\\
\hspace{60pt}{\textbf{if}}\hspace{5pt}self.symlabel:\\
\hspace{80pt}label=self.symlabel\\
\hspace{60pt}{\textbf{else:}}\\
\hspace{80pt}label={\texttt{{'}bz{'}}}\\
\hspace{80pt}self.symlabel=label\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}name\hspace{5pt}{\textbf{is}}\hspace{5pt}None:\\
\hspace{60pt}{\textbf{if}}\hspace{5pt}self.symname:\\
\hspace{80pt}name=self.symname\\
\hspace{60pt}{\textbf{else:}}\\
\hspace{80pt}name={\texttt{{'}Ubeamz{'}}}\\
\hspace{40pt}maximalines={[}{]}\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}N\hspace{5pt}{\textbf{is}}\hspace{5pt}None:\\
\hspace{60pt}N=self.maxsize\\
\hspace{40pt}Nstr=str(N)\\
\hspace{40pt}bzlines,defs,params=bendzsym(name,label)\\
\hspace{40pt}{\textbf{return}}\hspace{5pt}bzlines,\hspace{5pt}name,\hspace{5pt}defs,\hspace{5pt}params,\hspace{5pt}label\\
\\
\hspace{20pt}{\textbf{def}}\hspace{5pt}GetMaximaLatexString(self,name=None,label=None,wrap=0,N=N{}...\`$\Rightarrow$\\
...{}one,intro=None,aug=0):\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}intro\hspace{5pt}{\textbf{is}}\hspace{5pt}None:\\
\hspace{60pt}intro={\texttt{{'}The\hspace{5pt}transfer\hspace{5pt}matrix\hspace{5pt}for\hspace{5pt}a\hspace{5pt}beam\hspace{5pt}element\hspace{5pt}is\hspace{5pt}give}}{}...\`$\Rightarrow$\\
...{}{\texttt{n\hspace{5pt}by{'}}}\\
\hspace{40pt}{\textbf{return}}\hspace{5pt}TMMElement.GetMaximaLatexString(self,name=name,lab{}...\`$\Rightarrow$\\
...{}el=label,wrap=wrap,N=N,intro=intro,aug=aug)\\
\hspace{40pt}\\
\hspace{20pt}{\textbf{def}}\hspace{5pt}\_\_GetMaximaLatexString\_\_(self,name=None,label=None,wrap=0{}...\`$\Rightarrow$\\
...{},N=None,intro=None,aug=0):\\
\hspace{40pt}maximalines={[}{]}\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}N\hspace{5pt}{\textbf{is}}\hspace{5pt}None:\\
\hspace{60pt}N=self.maxsize\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}aug:\\
\hspace{60pt}bzlines,myname,\hspace{5pt}defs,\hspace{5pt}params=self.GetAugMaximaString({}...\`$\Rightarrow$\\
...{}name=name,label=label)\\
\hspace{40pt}{\textbf{else:}}\\
\hspace{60pt}bzlines,myname,\hspace{5pt}defs,\hspace{5pt}params=self.GetMaximaString(nam{}...\`$\Rightarrow$\\
...{}e=name,label=label)\\
\hspace{40pt}latexlines={[}{]}\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}intro\hspace{5pt}{\textbf{is}}\hspace{5pt}None:\\
\hspace{60pt}latexlines.append({\texttt{{'}The\hspace{5pt}transfer\hspace{5pt}matrix\hspace{5pt}for\hspace{5pt}a\hspace{5pt}beam\hspace{5pt}elm}}{}...\`$\Rightarrow$\\
...{}{\texttt{ent\hspace{5pt}is\hspace{5pt}given\hspace{5pt}by{'}}})\\
\hspace{40pt}{\textbf{else:}}\\
\hspace{60pt}latexlines.append(intro)\\
\hspace{40pt}{\textbf{if}}\hspace{5pt}aug:\\
\hspace{60pt}newcolind=\dash{}1\\
\hspace{60pt}{\textbf{for}}\hspace{5pt}x,line\hspace{5pt}{\textbf{in}}\hspace{5pt}enumerate(bzlines):\\
\hspace{80pt}{\textbf{if}}\hspace{5pt}line.find({\texttt{{'}newcol:{'}}})==0:\\
\hspace{100pt}newcolind=x\\
\hspace{100pt}{\textbf{break}}\\
\hspace{60pt}wherepart=bzlines{[}1:newcolind{]}\\
\hspace{60pt}bzlines{[}1:newcolind{]}={[}{]}\\
\hspace{60pt}preind=len(bzlines)\\
\hspace{60pt}bzlines.extend(wherepart)\\
\hspace{40pt}{\textbf{else:}}\\
\hspace{60pt}preind=1\\
\hspace{40pt}prelines=bzlines{[}0:preind{]}\\
\hspace{40pt}{\textbf{for}}\hspace{5pt}line\hspace{5pt}{\textbf{in}}\hspace{5pt}prelines:\\
\hspace{60pt}latexlines.append({\texttt{{'}$\backslash$$\backslash$begin\{maxima\dash{}noout\}{'}}})\\
\hspace{60pt}latexlines.append(line)\\
\hspace{60pt}latexlines.append({\texttt{{'}$\backslash$$\backslash$end\{maxima\dash{}noout\}{'}}})\\
\hspace{40pt}latexlines.append({\texttt{{'}$\backslash$$\backslash$begin\{maxima\}{'}}})\\
\hspace{40pt}latexlines.append({\texttt{\string"$\backslash$t$\backslash$$\backslash$parseopts\{lhs={'}\string"}}+myname+{\texttt{\string"{'},wrap=\string"}}+{}...\`$\Rightarrow$\\
...{}str(wrap)+{\texttt{\string"\}\string"}})\\
\hspace{40pt}latexlines.append({\texttt{{'}$\backslash$t{'}}}+myname)\\
\hspace{40pt}latexlines.append({\texttt{{'}$\backslash$$\backslash$end\{maxima\}{'}}})\\
\hspace{40pt}latexlines.append({\texttt{{'}where{'}}})\\
\hspace{40pt}deflines=bzlines{[}preind:{]}\\
\hspace{40pt}{\textbf{for}}\hspace{5pt}dl\hspace{5pt}{\textbf{in}}\hspace{5pt}deflines:\\
\hspace{60pt}latexlines.append({\texttt{{'}$\backslash$$\backslash$begin\{maxima\}{'}}})\\
\hspace{60pt}latexlines.append({\texttt{{'}$\backslash$t{'}}}+dl)\\
\hspace{60pt}latexlines.append({\texttt{{'}$\backslash$$\backslash$end\{maxima\}{'}}})\\
\hspace{40pt}{\textbf{return}}\hspace{5pt}latexlines,\hspace{5pt}defs,\hspace{5pt}params\\
\\
{\textbf{def}}\hspace{5pt}bendzsym(name={\texttt{{'}Ubeamz{'}}},label={\texttt{{'}bz{'}}}):\\
\hspace{20pt}linesout={[}{]}\\
\hspace{20pt}params={[}{]}\\
\hspace{20pt}defs={[}{]}\\
\hspace{20pt}matstr=name+{\texttt{{'}:matrix({[}c1,1/2$\ast$L$\ast$c4/beta,\dash{}1/2$\ast$a$\ast$c3/beta\^{}2,\dash{}1/2$\ast$}}{}...\`$\Rightarrow$\\
...{}{\texttt{L$\ast$a$\ast$c2/beta\^{}3{]},{[}1/2$\ast$beta$\ast$c2/L,c1,1/2$\ast$a$\ast$c4/beta/L,1/2$\ast$a$\ast$c3/beta\^{}2{]}}}{}...\`$\Rightarrow$\\
...{}{\texttt{,{[}\dash{}1/2$\ast$beta\^{}2$\ast$c3/a,1/2$\ast$beta$\ast$L$\ast$c2/a,c1,\dash{}1/2$\ast$L$\ast$c4/beta{]},{[}\dash{}1/2$\ast$beta\^{}}}{}...\`$\Rightarrow$\\
...{}{\texttt{3$\ast$c4/L/a,1/2$\ast$beta\^{}2$\ast$c3/a,\dash{}1/2$\ast$beta$\ast$c2/L,c1{]}){'}}}\\
\hspace{20pt}linesout.append(matstr)\\
\hspace{20pt}astr={\texttt{{'}a{'}}}+label\\
\hspace{20pt}bstr={\texttt{{'}beta{'}}}+label\\
\hspace{20pt}mustr={\texttt{{'}mu{'}}}+label\\
\hspace{20pt}EIstr={\texttt{{'}EI{'}}}+label\\
\hspace{20pt}Lstr={\texttt{{'}L{'}}}+label\\
{\it{\#\hspace{20pt}linesout.append({'}eq{'}+astr+{'}:{'}+astr+{'}={'}+Lstr+{'}\^{}2/{'}+EIstr)}}\\
{\it{\#\hspace{20pt}linesout.append({'}eq{'}+bstr+{'}:{'}+bstr+{'}=(\dash{}1$\ast$s\^{}2$\ast${'}+Lstr+{'}\^{}4$\ast${'}+mu}}{}...\`$\Rightarrow$\\
...{}{\it{str+{'}/{'}+EIstr+{'})\^{}(0.25){'})}}\\
\hspace{20pt}defs.append(astr+{\texttt{{'}={'}}}+Lstr+{\texttt{{'}\^{}2/{'}}}+EIstr)\\
\hspace{20pt}defs.append(bstr+{\texttt{{'}=(\dash{}1$\ast$s\^{}2$\ast${'}}}+Lstr+{\texttt{{'}\^{}4$\ast${'}}}+mustr+{\texttt{{'}/{'}}}+EIstr+{\texttt{{'})\^{}(0}}{}...\`$\Rightarrow$\\
...{}{\texttt{.25){'}}})\\
{\it{\#\hspace{20pt}defs.append(bstr+{'}=(\dash{}1$\ast$s\^{}2)\^{}0.25$\ast$({'}+Lstr+{'}\^{}4$\ast${'}+mustr+{'}/{'}+EIs}}{}...\`$\Rightarrow$\\
...{}{\it{tr+{'})\^{}(0.25){'})}}\\
\hspace{20pt}clist={[}{\texttt{{'}0.5$\ast$cos(beta)+0.5$\ast$cosh(beta){'}}},{\texttt{{'}\dash{}sin(beta)+sinh(beta){'}}}{}...\`$\Rightarrow$\\
...{},{\texttt{{'}cos(beta)\dash{}cosh(beta){'}}},{\texttt{{'}sin(beta)+sinh(beta){'}}}{]}\\
\hspace{20pt}params={[}mustr,EIstr,Lstr{]}\\
\hspace{20pt}{\textbf{for}}\hspace{5pt}x,curc\hspace{5pt}{\textbf{in}}\hspace{5pt}enumerate(clist):\\
\hspace{40pt}cstr={\texttt{{'}c{'}}}+str(x+1)\\
{\it{\#\hspace{40pt}cline={'}eq{'}+cstr+{'}:{'}+cstr+{'}={'}+curc}}\\
\hspace{40pt}cline=cstr+{\texttt{{'}={'}}}+curc\\
{\it{\#\hspace{40pt}junk,rp=cline.split({'}:{'},1)}}\\
{\it{\#\hspace{40pt}defs.append(rp)}}\\
{\it{\#\hspace{40pt}linesout.append(cline)}}\\
\hspace{40pt}defs.append(cline)\\
\hspace{20pt}replines={[}{]}\\
\hspace{20pt}strlist={[}{\texttt{{'}c1{'}}},{\texttt{{'}c2{'}}},{\texttt{{'}c3{'}}},{\texttt{{'}c4{'}}},{\texttt{{'}beta{'}}},{\texttt{{'}EI{'}}},{\texttt{{'}a{'}}},{\texttt{{'}L{'}}}{]}\\
\hspace{20pt}{\textbf{for}}\hspace{5pt}line\hspace{5pt}{\textbf{in}}\hspace{5pt}linesout:\\
{\it{\#\hspace{40pt}pdb.set\_trace()}}\\
\hspace{40pt}{\textbf{for}}\hspace{5pt}ent\hspace{5pt}{\textbf{in}}\hspace{5pt}strlist:\\
{\it{\#\hspace{60pt}line=line.replace(ent,ent+label)}}\\
\hspace{60pt}line=re.sub({\texttt{{'}$\backslash$$\backslash$b{'}}}+ent+{\texttt{{'}$\backslash$$\backslash$b{'}}},ent+label,line)\\
\hspace{40pt}replines.append(line)\\
\hspace{20pt}tempdef={[}{]}\\
\hspace{20pt}{\textbf{for}}\hspace{5pt}line\hspace{5pt}{\textbf{in}}\hspace{5pt}defs:\\
\hspace{40pt}{\textbf{for}}\hspace{5pt}ent\hspace{5pt}{\textbf{in}}\hspace{5pt}strlist:\\
\hspace{60pt}line=re.sub({\texttt{{'}$\backslash$$\backslash$b{'}}}+ent+{\texttt{{'}$\backslash$$\backslash$b{'}}},ent+label,line)\\
\hspace{40pt}tempdef.append(line)\\
\hspace{20pt}{\textbf{return}}\hspace{5pt}replines,\hspace{5pt}tempdef,\hspace{5pt}params{\it{\#{[}0{]},replines{[}1:{]}}}\\
\\
\\
{\textbf{def}}\hspace{5pt}bendmaty(s,params,EIstr={\texttt{{'}EI1{'}}}):\\
\hspace{20pt}EI=params{[}EIstr{]}\\
\hspace{20pt}mu=params{[}{\texttt{{'}mu{'}}}{]}\\
\hspace{20pt}L=params{[}{\texttt{{'}L{'}}}{]}\\
\hspace{20pt}beta=pow((\dash{}1$\ast$s$\ast$$\ast$2$\ast$L$\ast$$\ast$4$\ast$mu/EI),0.25)\\
\hspace{20pt}a=L$\ast$$\ast$2/EI\\
{\it{\#{[}\hspace{85pt}c(1),\hspace{25pt}\dash{}1/2$\ast$L$\ast$c(4)/beta,\hspace{15pt}\dash{}1/2$\ast$a$\ast$c(3)/beta}}{}...\`$\Rightarrow$\\
...{}{\it{\^{}2,\hspace{5pt}\dash{}1/2$\ast$L$\ast$a$\ast$c(2)/beta\^{}3{]}}}\\
{\it{\#{[}\hspace{25pt}\dash{}1/2$\ast$beta$\ast$c(2)/L,\hspace{85pt}c(1),\hspace{20pt}1/2$\ast$a$\ast$c(4)/beta}}{}...\`$\Rightarrow$\\
...{}{\it{/L,\hspace{20pt}1/2$\ast$a$\ast$c(3)/beta\^{}2{]}}}\\
{\it{\#{[}\hspace{15pt}\dash{}1/2$\ast$beta\^{}2$\ast$c(3)/a,\hspace{20pt}1/2$\ast$beta$\ast$L$\ast$c(2)/a,\hspace{85pt}c(}}{}...\`$\Rightarrow$\\
...{}{\it{1),\hspace{30pt}1/2$\ast$L$\ast$c(4)/beta{]}}}\\
{\it{\#{[}\hspace{5pt}\dash{}1/2$\ast$beta\^{}3$\ast$c(4)/L/a,\hspace{20pt}1/2$\ast$beta\^{}2$\ast$c(3)/a,\hspace{30pt}1/2$\ast$beta$\ast$c(2)}}{}...\`$\Rightarrow$\\
...{}{\it{/L,\hspace{85pt}c(1){]}}}\\
{\it{\#}}\\
{\it{\#\hspace{15pt}This\hspace{5pt}matrix\hspace{5pt}is\hspace{5pt}derived\hspace{5pt}in\hspace{5pt}bending\_about\_y\_axis.m\hspace{5pt}originally\hspace{5pt}i}}{}...\`$\Rightarrow$\\
...{}{\it{n\hspace{5pt}}}\\
{\it{\#\hspace{15pt}E:$\backslash$GT$\backslash$Research$\backslash$SAmii$\backslash$modeling$\backslash$transfer\_matrix$\backslash$threeD\_beam\_der}}{}...\`$\Rightarrow$\\
...{}{\it{ivations}}\\
{\it{\#}}\\
{\it{\#\hspace{15pt}The\hspace{5pt}states\hspace{5pt}that\hspace{5pt}multipy\hspace{5pt}the\hspace{5pt}matrix\hspace{5pt}are\hspace{5pt}{[}w\_z;theta\_y;M\_y;V\_z{]}\hspace{5pt}}}{}...\`$\Rightarrow$\\
...{}{\it{and\hspace{5pt}I\hspace{5pt}have\hspace{5pt}gone\hspace{5pt}away\hspace{5pt}from\hspace{5pt}using\hspace{5pt}\dash{}w\hspace{5pt}as\hspace{5pt}the\hspace{5pt}state\hspace{5pt}i.e.\hspace{5pt}+w\_z\hspace{5pt}is\hspace{5pt}the\hspace{5pt}}}{}...\`$\Rightarrow$\\
...{}{\it{first\hspace{5pt}state.}}\\
\hspace{20pt}c1=0.5$\ast$cos(beta)+0.5$\ast$cosh(beta)\\
\hspace{20pt}c2=\dash{}sin(beta)+sinh(beta)\\
\hspace{20pt}c3=\dash{}cos(beta)+cosh(beta)\\
\hspace{20pt}c4=sin(beta)+sinh(beta)\\
\hspace{20pt}outmat=array({[}{[}c1,\dash{}0.5$\ast$L$\ast$c4/beta,\dash{}0.5$\ast$a$\ast$c3/beta$\ast$$\ast$2,\dash{}0.5$\ast$L$\ast$a$\ast$c{}...\`$\Rightarrow$\\
...{}2/beta$\ast$$\ast$3{]},{[}\dash{}0.5$\ast$beta$\ast$c2/L,c1,0.5$\ast$a$\ast$c4/beta/L,0.5$\ast$a$\ast$c3/beta$\ast$$\ast$2{]},{[}{}...\`$\Rightarrow$\\
...{}\dash{}0.5$\ast$beta$\ast$$\ast$2$\ast$c3/a,0.5$\ast$beta$\ast$L$\ast$c2/a,c1,0.5$\ast$L$\ast$c4/beta{]},{[}\dash{}0.5$\ast$beta$\ast$$\ast$3{}...\`$\Rightarrow$\\
...{}$\ast$c4/L/a,0.5$\ast$beta$\ast$$\ast$2$\ast$c3/a,0.5$\ast$beta$\ast$c2/L,c1{]}{]})\\
\hspace{20pt}{\textbf{return}}\hspace{5pt}outmat\\
\\
{\textbf{def}}\hspace{5pt}bendmatz(s,params,EIstr={\texttt{{'}EI2{'}}}):\\
\hspace{20pt}EI=params{[}EIstr{]}\\
\hspace{20pt}mu=params{[}{\texttt{{'}mu{'}}}{]}\\
\hspace{20pt}L=params{[}{\texttt{{'}L{'}}}{]}\\
\hspace{20pt}beta=pow((\dash{}1$\ast$s$\ast$$\ast$2$\ast$L$\ast$$\ast$4$\ast$mu/EI),0.25)\\
\hspace{20pt}a=L$\ast$$\ast$2/EI\\
{\it{\#\hspace{20pt}{[}\hspace{85pt}mys(1),\hspace{30pt}1/2$\ast$L$\ast$mys(4)/beta,\hspace{15pt}\dash{}1/2$\ast$a$\ast$m}}{}...\`$\Rightarrow$\\
...{}{\it{ys(3)/beta\^{}2,\hspace{5pt}\dash{}1/2$\ast$L$\ast$a$\ast$mys(2)/beta\^{}3{]}}}\\
{\it{\#\hspace{20pt}{[}\hspace{30pt}1/2$\ast$beta$\ast$mys(2)/L,\hspace{85pt}mys(1),\hspace{20pt}1/2$\ast$a$\ast$m}}{}...\`$\Rightarrow$\\
...{}{\it{ys(4)/beta/L,\hspace{20pt}1/2$\ast$a$\ast$mys(3)/beta\^{}2{]}}}\\
{\it{\#\hspace{20pt}{[}\hspace{15pt}\dash{}1/2$\ast$beta\^{}2$\ast$mys(3)/a,\hspace{20pt}1/2$\ast$beta$\ast$L$\ast$mys(2)/a,\hspace{55pt}}}{}...\`$\Rightarrow$\\
...{}{\it{\hspace{30pt}mys(1),\hspace{25pt}\dash{}1/2$\ast$L$\ast$mys(4)/beta{]}}}\\
{\it{\#\hspace{20pt}{[}\hspace{5pt}\dash{}1/2$\ast$beta\^{}3$\ast$mys(4)/L/a,\hspace{20pt}1/2$\ast$beta\^{}2$\ast$mys(3)/a,\hspace{25pt}\dash{}1/2$\ast$b}}{}...\`$\Rightarrow$\\
...{}{\it{eta$\ast$mys(2)/L,\hspace{85pt}mys(1){]}}}\\
{\it{\#}}\\
{\it{\#\hspace{15pt}This\hspace{5pt}matrix\hspace{5pt}is\hspace{5pt}derived\hspace{5pt}in\hspace{5pt}bending\_about\_z\_axis.m\hspace{5pt}originally\hspace{5pt}i}}{}...\`$\Rightarrow$\\
...{}{\it{n\hspace{5pt}}}\\
{\it{\#\hspace{15pt}E:$\backslash$GT$\backslash$Research$\backslash$SAmii$\backslash$modeling$\backslash$transfer\_matrix$\backslash$threeD\_beam\_der}}{}...\`$\Rightarrow$\\
...{}{\it{ivations}}\\
{\it{\#}}\\
{\it{\#\hspace{15pt}The\hspace{5pt}states\hspace{5pt}that\hspace{5pt}multipy\hspace{5pt}the\hspace{5pt}matrix\hspace{5pt}are\hspace{5pt}{[}w\_y;theta\_z;M\_z;V\_y{]}\hspace{5pt}}}{}...\`$\Rightarrow$\\
...{}{\it{and\hspace{5pt}I\hspace{5pt}have\hspace{5pt}gone\hspace{5pt}away\hspace{5pt}from\hspace{5pt}using\hspace{5pt}\dash{}w\hspace{5pt}as\hspace{5pt}the\hspace{5pt}state\hspace{5pt}i.e.\hspace{5pt}+w\_y\hspace{5pt}is\hspace{5pt}the\hspace{5pt}}}{}...\`$\Rightarrow$\\
...{}{\it{first\hspace{5pt}state.}}\\
\hspace{20pt}c1=0.5$\ast$cos(beta)+0.5$\ast$cosh(beta)\\
\hspace{20pt}c2=\dash{}sin(beta)+sinh(beta)\\
\hspace{20pt}c3=cos(beta)\dash{}cosh(beta)\\
\hspace{20pt}c4=sin(beta)+sinh(beta)\\
\hspace{20pt}outmat=array({[}{[}c1,0.5$\ast$L$\ast$c4/beta,\dash{}0.5$\ast$a$\ast$c3/beta$\ast$$\ast$2,\dash{}0.5$\ast$L$\ast$a$\ast$c2{}...\`$\Rightarrow$\\
...{}/beta$\ast$$\ast$3{]},{[}0.5$\ast$beta$\ast$c2/L,c1,0.5$\ast$a$\ast$c4/beta/L,0.5$\ast$a$\ast$c3/beta$\ast$$\ast$2{]},{[}\dash{}0{}...\`$\Rightarrow$\\
...{}.5$\ast$beta$\ast$$\ast$2$\ast$c3/a,0.5$\ast$beta$\ast$L$\ast$c2/a,c1,\dash{}0.5$\ast$L$\ast$c4/beta{]},{[}\dash{}0.5$\ast$beta$\ast$$\ast$3$\ast${}...\`$\Rightarrow$\\
...{}c4/L/a,0.5$\ast$beta$\ast$$\ast$2$\ast$c3/a,\dash{}0.5$\ast$beta$\ast$c2/L,c1{]}{]})\\
\hspace{20pt}{\textbf{return}}\hspace{5pt}outmat\\
\\
{\textbf{def}}\hspace{5pt}axialtorsionmat(s,params):{\it{\#L,mu,EA,m11,GJ):}}\\
\hspace{20pt}axmat=axialmat(s,params)\\
\hspace{20pt}tormat=torsionmat(s,params)\\
{\it{\#\hspace{20pt}matout=scipy.zeros((2$\ast$scipy.shape(axmat){[}0{]},2$\ast$scipy.shape(ax}}{}...\`$\Rightarrow$\\
...{}{\it{mat){[}1{]}))}}\\
\hspace{20pt}matout=scipy.zeros((4,4))\\
\hspace{20pt}matout=matout$\ast$1j\\
\hspace{20pt}matout{[}1:3,1:3{]}=tormat{\it{\#python\hspace{5pt}slice\hspace{5pt}assignment\hspace{5pt}goes\hspace{5pt}to\hspace{5pt}1\hspace{5pt}less}}{}...\`$\Rightarrow$\\
...{}{\it{\hspace{5pt}than\hspace{5pt}the\hspace{5pt}last\hspace{5pt}index}}\\
\hspace{20pt}matout{[}0,0{]}=axmat{[}0,0{]}\\
\hspace{20pt}matout{[}0,3{]}=axmat{[}0,1{]}\\
\hspace{20pt}matout{[}3,0{]}=axmat{[}1,0{]}\\
\hspace{20pt}matout{[}3,3{]}=axmat{[}1,1{]}\\
\hspace{20pt}{\textbf{return}}\hspace{5pt}matout\\
\hspace{60pt}\\
{\textbf{def}}\hspace{5pt}torsionmat(s,params):{\it{\#L,m11,GJ):}}\\
\hspace{20pt}{\it{\#the\hspace{5pt}states\hspace{5pt}for\hspace{5pt}this\hspace{5pt}matrix\hspace{5pt}are\hspace{5pt}{[}{[}theta{]},{[}tau{]}{]}}}\\
{\it{\#\hspace{20pt}{[}\hspace{105pt}1/2$\ast$exp(sigma$\ast$L)+1/2$\ast$exp(\dash{}sigma$\ast$L),\hspace{5pt}1/}}{}...\`$\Rightarrow$\\
...{}{\it{2$\ast$exp(sigma$\ast$L)/G/J/sigma\dash{}1/2$\ast$exp(\dash{}sigma$\ast$L)/G/J/sigma{]}}}\\
{\it{\#\hspace{20pt}{[}\hspace{5pt}1/2$\ast$G$\ast$J$\ast$sigma$\ast$exp(sigma$\ast$L)\dash{}1/2$\ast$G$\ast$J$\ast$sigma$\ast$exp(\dash{}sigma$\ast$L),\hspace{15pt}}}{}...\`$\Rightarrow$\\
...{}{\it{\hspace{90pt}1/2$\ast$exp(sigma$\ast$L)+1/2$\ast$exp(\dash{}sigma$\ast$L){]}}}\\
\hspace{20pt}L=params{[}{\texttt{{'}L{'}}}{]}\\
\hspace{20pt}m11=params{[}{\texttt{{'}m11{'}}}{]}\\
\hspace{20pt}GJ=params{[}{\texttt{{'}GJ{'}}}{]}\\
\hspace{20pt}sigma=s$\ast$scipy.sqrt(m11/GJ)\\
\hspace{20pt}matout=scipy.array({[}{[}0.5$\ast$exp(sigma$\ast$L)+0.5$\ast$exp(\dash{}sigma$\ast$L),\hspace{5pt}0.5$\ast${}...\`$\Rightarrow$\\
...{}exp(sigma$\ast$L)/GJ/sigma\dash{}0.5$\ast$exp(\dash{}sigma$\ast$L)/GJ/sigma{]},{[}0.5$\ast$GJ$\ast$sigma$\ast$e{}...\`$\Rightarrow$\\
...{}xp(sigma$\ast$L)\dash{}0.5$\ast$GJ$\ast$sigma$\ast$exp(\dash{}sigma$\ast$L),0.5$\ast$exp(sigma$\ast$L)+0.5$\ast$exp(\dash{}{}...\`$\Rightarrow$\\
...{}sigma$\ast$L){]}{]})\\
\hspace{20pt}{\textbf{return}}\hspace{5pt}matout\\
\\
\\
{\textbf{def}}\hspace{5pt}axialmat(s,params):{\it{\#L,mu,EA):}}\\
\hspace{20pt}{\it{\#axial}}\\
\hspace{20pt}{\it{\#{[}1/2$\ast$exp(sigma$\ast$L)+1/2$\ast$exp(\dash{}sigma$\ast$L),1/2$\ast$exp(sigma$\ast$L)/E/A/sig}}{}...\`$\Rightarrow$\\
...{}{\it{ma\dash{}1/2$\ast$exp(\dash{}sigma$\ast$L)/E/A/sigma{]}}}\\
\hspace{20pt}{\it{\#{[}1/2$\ast$E$\ast$A$\ast$sigma$\ast$exp(sigma$\ast$L)\dash{}1/2$\ast$E$\ast$A$\ast$sigma$\ast$exp(\dash{}sigma$\ast$L),1/2$\ast$}}{}...\`$\Rightarrow$\\
...{}{\it{exp(sigma$\ast$L)+1/2$\ast$exp(\dash{}sigma$\ast$L){]}}}\\
\hspace{20pt}L=params{[}{\texttt{{'}L{'}}}{]}\\
\hspace{20pt}mu=params{[}{\texttt{{'}mu{'}}}{]}\\
\hspace{20pt}EA=params{[}{\texttt{{'}EA{'}}}{]}\\
\hspace{20pt}sigma=s$\ast$scipy.sqrt(mu/EA)\\
\hspace{20pt}{\it{\#}}\\
\hspace{20pt}{\it{\#\hspace{15pt}This\hspace{5pt}matrix\hspace{5pt}is\hspace{5pt}derived\hspace{5pt}in\hspace{5pt}axial\_rod.m\hspace{5pt}which\hspace{5pt}was\hspace{5pt}originall}}{}...\`$\Rightarrow$\\
...{}{\it{y\hspace{5pt}in}}\\
\hspace{20pt}{\it{\#\hspace{15pt}E:$\backslash$GT$\backslash$Research$\backslash$Samii$\backslash$modeling$\backslash$transfer\_matrix$\backslash$torsional\_s}}{}...\`$\Rightarrow$\\
...{}{\it{haft\_derivation}}\\
\hspace{20pt}{\it{\#}}\\
\hspace{20pt}{\it{\#\hspace{15pt}This\hspace{5pt}matrix\hspace{5pt}assumes\hspace{5pt}+w\_x\hspace{5pt}and\hspace{5pt}V\_x\hspace{5pt}are\hspace{5pt}the\hspace{5pt}states}}\\
\hspace{20pt}{\it{\#}}\\
\hspace{20pt}matout=array({[}{[}0.5$\ast$exp(sigma$\ast$L)+0.5$\ast$exp(\dash{}sigma$\ast$L),0.5$\ast$exp(sig{}...\`$\Rightarrow$\\
...{}ma$\ast$L)/(EA$\ast$sigma)\dash{}0.5$\ast$exp(\dash{}sigma$\ast$L)/(EA$\ast$sigma){]},{[}0.5$\ast$EA$\ast$sigma$\ast$exp({}...\`$\Rightarrow$\\
...{}sigma$\ast$L)\dash{}0.5$\ast$EA$\ast$sigma$\ast$exp(\dash{}sigma$\ast$L),0.5$\ast$exp(sigma$\ast$L)+0.5$\ast$exp(\dash{}sig{}...\`$\Rightarrow$\\
...{}ma$\ast$L){]}{]})\\
\hspace{20pt}{\textbf{return}}\hspace{5pt}matout\\

\end{tabbing}}}
